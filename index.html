<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Vokabeltrainer</title>

    <script type="text/javascript" src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <style>
        .left, .right{
            display:inline-block;
            margin-right:20px;
        }

        input.green {
            background-color:#dff5d5;
        }

        input.red {
            background-color:#ff877b;
        }

        th {
            text-align: left;
            background-color:#3d94f6;
            color: white;
            text-shadow: none;
        }

        input {
            max-width:90%;
            transition: background-color 100ms linear;
        }

        #main {
            position:relative;
            width:95%;
            margin:auto;
            margin-top: 20px;
        }
    </style>

<script>

    // Vokabeln im CSV-Format (jede Zeile ein Eintrag: Deutsch, Fremdsprache, Kategorie)
    var csvData = `Deutsch,Fremdsprache,Kategorie
    Apfel,Apple,Obst
    Hund,Dog,Tiere
    Haus,House,Bauwerke
    Auto,Car,Verkehr`;

    // Parsing der CSV-Daten und Erstellen des Vokabel-Arrays
    var dictionary = [];
    var rows = csvData.split("\n");
    for (var i = 1; i < rows.length; i++) {  // Start bei 1, um die Kopfzeile zu 체berspringen
        var cols = rows[i].split(",");
        if (cols.length == 3) {
            dictionary.push({
                german: cols[0].trim(),
                foreign: cols[1].trim(),
                category: cols[2].trim()
            });
        }
    }

    var learnIndex = 0;
    var willSkipEvaluation = false;

    // Funktion zum Starten der Abfrage
    function startQuestioning() {
        shuffleDic();
        $("#modeinput").hide();
        $("#modelearn").show();

        learnIndex = 0;
        showEntry(dictionary[learnIndex]);
    }

    // Vokabeln mischen
    function shuffleDic() {
        for (var j, x, i = dictionary.length; i; j = Math.floor(Math.random() * i), x = dictionary[--i], dictionary[i] = dictionary[j], dictionary[j] = x);
    }

    // Zeige die Vokabel f체r das Abfragen
    function showEntry(entry) {
        var a = entry.german;
        $("#vokabel").html(a + "<br>Vokabel  " + (learnIndex + 1) + " von " + dictionary.length);
        $("#inputvokabel").val(""); // Eingabefeld leeren
    }

    // Weiter zur n채chsten Vokabel
    function nextVokabel() {
        var entry = dictionary[learnIndex];
        var userInput = $("#inputvokabel").val().trim();

        if (userInput.toLowerCase() === entry.foreign.toLowerCase()) {
            learnIndex++;
            if (learnIndex < dictionary.length) {
                showEntry(dictionary[learnIndex]);
                toast("Richtig!");
            } else {
                toast("Gl체ckwunsch, du hast alle Vokabeln richtig beantwortet!");
                $("#modelearn").hide();
                $("#modeinput").show();
            }
        } else {
            toast("Leider falsch, versuche es nochmal.");
        }
    }

    // Anzeige von Toast-Nachrichten
    function toast(message) {
        alert(message); // Einfacher Alert, um Feedback zu geben
    }

    $(document).ready(function() {
        $("#startBtn").click(startQuestioning);

        $("#nextBtn").click(function(event) {
            nextVokabel();
            event.preventDefault();
        });
    });

</script>
</head>

<body>
<div id="main">

    <div id="modeinput">
        <h2>Vokabeln eingeben (wird automatisch geladen)</h2>
        <button id="startBtn">Jetzt Abfragen</button>
    </div>

    <div id="modelearn" style="text-align: center; display: none;">
        <h2>Vokabel abfragen</h2>
        <h3 id="vokabel"></h3>

        <form id="vokabelform" onsubmit="nextVokabel();event.preventDefault();return false;">
            <input autocomplete="off" type="text" size="40" id="inputvokabel" />
            <br><br>
            <input type="submit" id="nextBtn" value="Weiter" />
        </form>
    </div>

</div>

</body>
</html>
